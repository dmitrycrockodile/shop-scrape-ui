{"version":3,"file":"productsService-2GV88327.js","sources":["../../src/services/productsService.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"../router/index\";\nimport { handleResponse, handleError } from \"../utils/helpers\";\nimport { BASE_API_URL } from \"../utils/constants\";\n\nexport const fetchProducts = async (dataPerPage, page) => {\n  try {\n    const res = await axios.post(`${BASE_API_URL}/products`, {\n      dataPerPage,\n      page,\n    });\n\n    return handleResponse(res);\n  } catch (err) {\n    return handleError(err);\n  }\n};\n\nexport const updateProduct = async (data, images, id) => {\n  try {\n    const formData = new FormData();\n\n    formData.append(\"title\", data.title);\n    formData.append(\"description\", data.description);\n    formData.append(\"manufacturer_part_number\", data.manufacturer_part_number);\n    formData.append(\"pack_size_id\", data.pack_size_id);\n    formData.append(\"_method\", \"put\");\n\n    const imageUrls = [];\n    if (data.images.length) {\n      data.images.forEach((image) => imageUrls.push(image.file_url));\n      formData.append(\"image_urls\", JSON.stringify(imageUrls));\n    }\n\n    if (images[0]) {\n      images.forEach((image) => {\n        formData.append(\"images[]\", image);\n      });\n    }\n\n    const res = await axios.post(`${BASE_API_URL}/products/${id}`, formData);\n    return handleResponse(res);\n  } catch (err) {\n    console.error(err);\n    if (err.response.status === 404) {\n      router.push({ name: \"notFound\", params: { catchAll: \"not-found\" } });\n    }\n    return handleError(err);\n  }\n};\n\nexport const createProduct = async (data, images) => {\n  try {\n    const formData = new FormData();\n\n    formData.append(\"title\", data.title);\n    formData.append(\"description\", data.description);\n    formData.append(\"manufacturer_part_number\", data.manufacturer_part_number);\n    formData.append(\"pack_size_id\", data.pack_size_id);\n    if (images[0]) {\n      images.forEach((image) => {\n        formData.append(\"images[]\", image);\n      });\n    }\n\n    const res = await axios.post(`${BASE_API_URL}/products/store`, formData);\n\n    return handleResponse(res);\n  } catch (err) {\n    console.error(err);\n    if (err.response.status === 404) {\n      router.push({ name: \"notFound\", params: { catchAll: \"not-found\" } });\n    }\n    return handleError(err);\n  }\n};\n\nexport const deleteProduct = async (id) => {\n  try {\n    const res = await axios.delete(`${BASE_API_URL}/products/${id}`);\n\n    return handleResponse(res);\n  } catch (err) {\n    if (err.response.status === 404) {\n      router.push({ name: \"notFound\", params: { catchAll: \"not-found\" } });\n    }\n    return handleError(err);\n  }\n};\n\nexport const getRetailers = async (id) => {\n  try {\n    const res = await axios.get(`${BASE_API_URL}/products/${id}/retailers`);\n\n    return handleResponse(res);\n  } catch (err) {\n    if (err.response.status === 404) {\n      router.push({ name: \"notFound\", params: { catchAll: \"not-found\" } });\n    }\n    return handleError(err);\n  }\n};\n\nexport const uploadProductsCSV = async (formData) => {\n  try {\n    const res = await axios.post(\n      `${BASE_API_URL}/products/upload-csv`,\n      formData,\n      {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      }\n    );\n\n    return handleResponse(res);\n  } catch (err) {\n    console.error(\"CSV Upload Error:\", err);\n    return handleError(err);\n  }\n};\n\nexport const downloadProductsCSV = async (startDate, endDate, retailers) => {\n    try {\n      const res = await axios.post(`${BASE_API_URL}/products/export`, {\n          startDate,\n          endDate,\n          retailers\n        },\n        {\n            responseType: 'blob'\n        },\n      );\n\n      const contentDisposition = res.headers['content-disposition'];\n      let fileName = 'products.csv';\n      if (contentDisposition) {\n        const fileNameMatch = contentDisposition.match(/filename=(.+)/);\n        if (fileNameMatch && fileNameMatch[1]) {\n          fileName = fileNameMatch[1];\n        }\n      }\n    \n      const link = document.createElement('a');\n      link.href = window.URL.createObjectURL(res.data);\n      link.download = fileName;    \n      link.click();\n  \n      window.URL.revokeObjectURL(link.href);\n\n      return res;\n    } catch (err) {\n      console.error('CSV Download Error:', err);\n    }\n  };"],"names":["fetchProducts","dataPerPage","page","res","axios","BASE_API_URL","handleResponse","err","handleError","updateProduct","data","images","id","formData","imageUrls","image","router","createProduct","deleteProduct","getRetailers","uploadProductsCSV","downloadProductsCSV","startDate","endDate","retailers","contentDisposition","fileName","fileNameMatch","link"],"mappings":"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"}