{"version":3,"file":"Create-ChMbMYPs.js","sources":["../../src/views/product/Create.vue"],"sourcesContent":["<script>\nimport { mapActions, mapGetters } from \"vuex\";\n\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport ArgonInput from \"@/components/ArgonInput.vue\";\nimport PackSizeSelect from \"@/components/PackSizeSelect.vue\";\n\nimport { createProduct } from \"@/services/productsService\";\n\nexport default {\n  name: \"Product Create\",\n  components: {\n    ArgonInput,\n    ArgonButton,\n    PackSizeSelect,\n  },\n  data() {\n    return {\n      createProductForm: {\n        title: \"\",\n        description: \"\",\n        manufacturer_part_number: \"\",\n        pack_size_id: null,\n        images: [],\n      },\n      maxImages: 5,\n      newImages: [],\n      loading: false,\n      validationErrors: {},\n    };\n  },\n  methods: {\n    ...mapActions(\"products\", [\"addProduct\"]),\n    async handleCreate() {\n      this.validationErrors = {};\n      const res = await createProduct(this.createProductForm, this.newImages);\n\n      if (res.success) {\n        this.addProduct(res.data);\n        this.$router.push({ name: \"Products\" });\n      } else {\n        if (res.errors) {\n          this.validationErrors = res.errors;\n        }\n      }\n    },\n    handleFileChange(event, index) {\n      const file = event.target.files[0];\n      if (file) {\n        this.newImages[index] = file;\n      }\n    },\n    addNewInputField() {\n      if (this.newImages.length < this.maxImages) {\n        this.newImages.push(null);\n      }\n    },\n    removeNewInputField() {\n      if (this.newImages.length > 0) {\n        this.newImages.pop();\n      }\n    },\n    getPreviewUrl(file) {\n      return file && window.URL ? window.URL.createObjectURL(file) : \"\";\n    },\n  },\n  computed: {\n    ...mapGetters({\n      packSizes: \"packSizes/getPackSizes\",\n    }),\n  },\n};\n</script>\n\n<template>\n  <div class=\"container-fluid py-4 flex-grow-1\">\n    <div class=\"row\">\n      <div class=\"col-lg-8 col-md-8 mx-auto\">\n        <div class=\"card\">\n          <div class=\"card-header pb-0 text-center\">\n            <h6 class=\"text-primary\">Create Product</h6>\n          </div>\n\n          <div class=\"card-body\">\n            <form @submit.prevent=\"handleCreate\">\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Product Title</label>\n                <argon-input\n                  v-model.trim.lazy=\"createProductForm.title\"\n                  type=\"text\"\n                  placeholder=\"Enter product name\"\n                  required\n                />\n                <div v-if=\"validationErrors.title\" class=\"text-danger\">\n                  {{ validationErrors.title[0] }}\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Description</label>\n                <textarea\n                  v-model.trim.lazy=\"createProductForm.description\"\n                  class=\"form-control\"\n                  placeholder=\"Enter product description\"\n                ></textarea>\n                <div v-if=\"validationErrors.description\" class=\"text-danger\">\n                  {{ validationErrors.description[0] }}\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Manufacturer Part Number</label>\n                <argon-input\n                  v-model.trim.lazy=\"createProductForm.manufacturer_part_number\"\n                  type=\"text\"\n                  placeholder=\"Enter manufacturer part number\"\n                  required\n                />\n                <div\n                  v-if=\"validationErrors.manufacturer_part_number\"\n                  class=\"text-danger\"\n                >\n                  {{ validationErrors.manufacturer_part_number[0] }}\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Pack Size</label>\n                <pack-size-select\n                  :options=\"packSizes\"\n                  v-model=\"createProductForm.pack_size_id\"\n                  name=\"pack_size\"\n                />\n                <div v-if=\"validationErrors.pack_size_id\" class=\"text-danger\">\n                  {{ validationErrors.pack_size_id[0] }}\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label class=\"form-label\">New Images</label>\n                <div v-if=\"validationErrors.images\" class=\"text-danger\">\n                  {{ validationErrors.images[0] }}\n                </div>\n                <div\n                  v-for=\"(file, index) in newImages\"\n                  :key=\"'new-' + index\"\n                  class=\"mb-3\"\n                >\n                  <input\n                    type=\"file\"\n                    class=\"form-control\"\n                    accept=\"image/*\"\n                    @change=\"handleFileChange($event, index)\"\n                  />\n                  <div v-if=\"file\">\n                    <img\n                      :src=\"getPreviewUrl(file)\"\n                      alt=\"New image preview\"\n                      class=\"img-thumbnail m-1 w-50\"\n                      width=\"100\"\n                    />\n                  </div>\n                  <div\n                    v-if=\"validationErrors[`images.${index}`]\"\n                    class=\"text-danger\"\n                  >\n                    {{ validationErrors[`images.${index}`][0] }}\n                  </div>\n                </div>\n              </div>\n\n              <argon-button\n                color=\"primary\"\n                class=\"mt-2 mb-4\"\n                @click.prevent=\"addNewInputField\"\n                :disabled=\"newImages.length >= maxImages\"\n              >\n                Add\n              </argon-button>\n\n              <argon-button\n                color=\"primary\"\n                class=\"mt-2 mb-4 ms-2\"\n                @click.prevent=\"removeNewInputField\"\n                :disabled=\"newImages.length <= 0\"\n              >\n                Remove\n              </argon-button>\n\n              <div class=\"text-center\">\n                <argon-button type=\"submit\" color=\"primary\" :disabled=\"loading\">\n                  {{ loading ? \"Creating...\" : \"Create Product\" }}\n                </argon-button>\n                <argon-button\n                  color=\"secondary\"\n                  class=\"ms-2\"\n                  @click=\"$router.push('/products')\"\n                >\n                  Cancel\n                </argon-button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n"],"names":["_sfc_main","ArgonInput","ArgonButton","PackSizeSelect","mapActions","res","createProduct","event","index","file","mapGetters","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_10","_hoisted_12","_hoisted_14","_hoisted_16","_hoisted_18","_hoisted_20","_openBlock","_createElementBlock","_createElementVNode","_cache","_withModifiers","$options","args","_createVNode","_component_argon_input","$data","$event","_hoisted_7","_toDisplayString","_createCommentVNode","_hoisted_9","_hoisted_11","_component_pack_size_select","_ctx","_hoisted_13","_hoisted_15","_Fragment","_renderList","_hoisted_17","_hoisted_19","_component_argon_button","_withCtx","_createTextVNode"],"mappings":"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"}