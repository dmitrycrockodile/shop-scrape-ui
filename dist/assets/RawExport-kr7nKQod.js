import{_ as D,d,e as t,i as c,h as m,t as f,p as _,w as V,f as g,F as S,r as x,T as k,o as a,n as O,m as y,b as C,k as b,v as h,g as u}from"./index-Cm14stn1.js";import{R as E}from"./RetailersSelect-CxFTJVoB.js";import{c as R}from"./metricsService-bWrsRtkp.js";const P={data(){return{selectedOptions:this.modelValue||[],isDropdownVisible:!1}},props:{options:{type:Array,required:!0},modelValue:{default:()=>[]},name:{type:String,default:""}},emits:["update:modelValue"],methods:{toggleOption(o){const e=this.selectedOptions.findIndex(i=>i.id===o.id);e===-1?this.selectedOptions.push(o):this.selectedOptions.splice(e,1),this.$emit("update:modelValue",this.selectedOptions.map(i=>i.id))},closeDropdown(o){this.$refs.dropDown.contains(o.target)||(this.isDropdownVisible=!1)}},computed:{isOptionSelected(){return o=>this.selectedOptions.some(e=>e.id===o.id)}},watch:{modelValue(o){this.selectedOptions=this.options.filter(e=>o.includes(e.id))}},mounted(){window.addEventListener("click",this.closeDropdown)},unmounted(){window.removeEventListener("click",this.closeDropdown)}},B=["name"],N={key:0,class:"options__wrapper"},T=["onClick"],U=["checked"];function L(o,e,i,v,s,n){return a(),d("div",{class:"dropdown__wrapper",ref:"dropDown",name:i.name},[t("div",{class:"dropdown__selected-option",onClick:e[0]||(e[0]=r=>s.isDropdownVisible=!s.isDropdownVisible)},[m(f(s.selectedOptions.length>0?`${s.selectedOptions.length} Products Selected`:"Select Products")+" ",1),t("i",{class:_(`flaticon-down-arrow ${s.isDropdownVisible?"active":""}`)},null,2)]),c(k,{name:"slide-fade"},{default:V(()=>[s.isDropdownVisible?(a(),d("div",N,[(a(!0),d(S,null,x(i.options,(r,p)=>(a(),d("div",{class:_(`option ${n.isOptionSelected(r)?"selected":""}`),onClick:O(w=>n.toggleOption(r),["prevent"]),key:p},[t("input",{class:"me-2",type:"checkbox",checked:n.isOptionSelected(r)},null,8,U),m(" "+f(r.title),1)],10,T))),128))])):g("",!0)]),_:1})],8,B)}const A=D(P,[["render",L],["__scopeId","data-v-71767545"]]),F={name:"RawExport",data(){return{filters:{startDate:"",endDate:"",retailers:[],products:[]},loading:!1}},components:{ArgonButton:C,RetailersSelect:E,ProductsSelect:A},methods:{async downloadCSV(){console.log(this.filters.startDate,this.filters.endDate,this.filters.retailers,this.filters.products),await R(this.filters.startDate,this.filters.endDate,this.filters.retailers,this.filters.products)}},computed:{...y({retailers:"retailers/getRetailers",products:"products/getProducts"})}},I={class:"mt-4 px-4 flex-grow-1"},M={class:"card shadow border-0"},q={class:"card-body"},z={class:"row"},G={class:"col-md-6 mb-3"},$={class:"col-md-6 mb-3"},j={class:"col-md-6 mb-3"},H={class:"col-md-6 mb-3"};function J(o,e,i,v,s,n){const r=u("RetailersSelect"),p=u("ProductsSelect"),w=u("argon-button");return a(),d("div",I,[t("div",M,[e[10]||(e[10]=t("div",{class:"card-header border-0"},[t("h3",{class:"mb-0"},"Export Raw Scraped Data")],-1)),t("div",q,[t("div",z,[t("div",G,[e[5]||(e[5]=t("label",{class:"form-control-label"},"Start Date",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=l=>s.filters.startDate=l),class:"form-control"},null,512),[[h,s.filters.startDate]])]),t("div",$,[e[6]||(e[6]=t("label",{class:"form-control-label"},"End Date",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=l=>s.filters.endDate=l),class:"form-control"},null,512),[[h,s.filters.endDate]])]),t("div",j,[e[7]||(e[7]=t("label",{class:"form-control-label"},"Retailers",-1)),c(r,{modelValue:s.filters.retailers,"onUpdate:modelValue":e[2]||(e[2]=l=>s.filters.retailers=l),options:o.retailers,name:"retailers"},null,8,["modelValue","options"])]),t("div",H,[e[8]||(e[8]=t("label",{class:"form-control-label"},"Products",-1)),c(p,{modelValue:s.filters.products,"onUpdate:modelValue":e[3]||(e[3]=l=>s.filters.products=l),options:o.products,name:"products"},null,8,["modelValue","options"])])]),c(w,{type:"submit",disabled:s.loading,color:"success",class:"d-flex align-items-center",onClick:e[4]||(e[4]=l=>n.downloadCSV())},{default:V(()=>[e[9]||(e[9]=t("i",{class:"fas fa-download me-1"},null,-1)),m(" "+f(s.loading?"Exporting...":"Export CSV"),1)]),_:1},8,["disabled"])])])])}const X=D(F,[["render",J]]);export{X as default};
//# sourceMappingURL=RawExport-kr7nKQod.js.map
