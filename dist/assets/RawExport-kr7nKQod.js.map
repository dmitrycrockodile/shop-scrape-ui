{"version":3,"file":"RawExport-kr7nKQod.js","sources":["../../src/components/ProductsSelect.vue","../../src/views/metric/RawExport.vue"],"sourcesContent":["<script>\nexport default {\n  data() {\n    return {\n      selectedOptions: this.modelValue || [],\n      isDropdownVisible: false,\n    };\n  },\n  props: {\n    options: { type: Array, required: true },\n    modelValue: { default: () => [] },\n    name: { type: String, default: \"\" },\n  },\n  emits: [\"update:modelValue\"],\n  methods: {\n    toggleOption(option) {\n      const index = this.selectedOptions.findIndex(\n        (selected) => selected.id === option.id\n      );\n\n      if (index === -1) {\n\n        this.selectedOptions.push(option);\n      } else {\n\n        this.selectedOptions.splice(index, 1);\n      }\n\n      this.$emit(\"update:modelValue\", this.selectedOptions.map((opt) => opt.id));\n    },\n    closeDropdown(event) {\n\n      if (!this.$refs.dropDown.contains(event.target)) {\n        this.isDropdownVisible = false;\n      }\n    },\n  },\n  computed: {\n    isOptionSelected() {\n      return (option) => {\n        return this.selectedOptions.some((selected) => selected.id === option.id);\n      };\n    },\n  },\n  watch: {\n    modelValue(newValue) {\n      this.selectedOptions = this.options.filter((option) =>\n        newValue.includes(option.id)\n      );\n    },\n  },\n  mounted() {\n    window.addEventListener(\"click\", this.closeDropdown);\n  },\n  unmounted() {\n    window.removeEventListener(\"click\", this.closeDropdown);\n  },\n};\n</script>\n<template>\n    <div class=\"dropdown__wrapper\" ref=\"dropDown\" :name=\"name\">\n      <div\n        class=\"dropdown__selected-option\"\n        @click=\"isDropdownVisible = !isDropdownVisible\"\n      >\n        {{\n          selectedOptions.length > 0\n            ? `${selectedOptions.length} Products Selected`\n            : \"Select Products\"\n        }}\n        <i\n          :class=\"`flaticon-down-arrow ${isDropdownVisible ? 'active' : ''}`\"\n        ></i>\n      </div>\n  \n      <transition name=\"slide-fade\">\n        <div class=\"options__wrapper\" v-if=\"isDropdownVisible\">\n          <div\n            :class=\"`option ${isOptionSelected(option) ? 'selected' : ''}`\"\n            v-for=\"(option, i) in options\"\n            @click.prevent=\"toggleOption(option)\"\n            :key=\"i\"\n          >\n            <input class=\"me-2\" type=\"checkbox\" :checked=\"isOptionSelected(option)\" />\n            {{ option.title }}\n          </div>\n        </div>\n      </transition>\n    </div>\n  </template>\n  \n\n<style scoped>\n.dropdown__wrapper {\n  cursor: pointer;\n  min-width: 160px;\n  padding: 5px 10px;\n  text-align: center;\n  font-size: 14px;\n  position: relative;\n  z-index: 100;\n  border: 1px solid #5e72e4;\n  border-radius: 5px;\n  background: #fff;\n}\n\n.dropdown__selected-option {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 500;\n  position: relative;\n}\n\n.dropdown__selected-option i {\n  transition: transform 0.2s;\n}\n\n.dropdown__selected-option i.active {\n  transform: rotate(180deg);\n}\n\n.options__wrapper {\n  background-color: #fff;\n  border: 1px solid #5e72e4;\n  position: absolute;\n  width: 100%;\n  top: 100%;\n  left: 0;\n  z-index: 101;\n  border-radius: 5px;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.option {\n  padding: 8px;\n  cursor: pointer;\n  transition: background 0.2s;\n  display: flex;\n  align-items: center;\n}\n\n.option:hover {\n  background-color: #e0e0e0;\n}\n\n.option.disabled {\n  background-color: #d2d2d2;\n  cursor: default;\n}\n\n.slide-fade-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.slide-fade-leave-active {\n  transition: all 0.2s cubic-bezier(1, 0.5, 0.8, 1);\n}\n\n.slide-fade-enter-from,\n.slide-fade-leave-to {\n  transform: translateY(-10px);\n  opacity: 0;\n}\n</style>","<script>\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport RetailersSelect from \"@/components/RetailersSelect.vue\";\nimport ProductsSelect from \"@/components/ProductsSelect.vue\";\nimport { downloadScrapedDataCSV } from \"@/services/metricsService\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"RawExport\",\n  data() {\n    return {\n      filters: {\n        startDate: \"\",\n        endDate: \"\",\n        retailers: [],\n        products: [],\n      },\n      loading: false,\n    };\n  },\n  components: {\n    ArgonButton,\n    RetailersSelect,\n    ProductsSelect\n  },\n  methods: {\n    async downloadCSV() {\n        console.log(this.filters.startDate,\n        this.filters.endDate,\n        this.filters.retailers,\n        this.filters.products,)\n      await downloadScrapedDataCSV(\n        this.filters.startDate,\n        this.filters.endDate,\n        this.filters.retailers,\n        this.filters.products,\n      );\n    },\n  },\n  computed: {\n    ...mapGetters({\n      retailers: \"retailers/getRetailers\",\n      products: \"products/getProducts\",\n    }),\n  },\n};\n</script>\n\n<template>\n  <div class=\"mt-4 px-4 flex-grow-1\">\n    <div class=\"card shadow border-0\">\n      <div class=\"card-header border-0\">\n        <h3 class=\"mb-0\">Export Raw Scraped Data</h3>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"row\">\n          <div class=\"col-md-6 mb-3\">\n            <label class=\"form-control-label\">Start Date</label>\n            <input\n              type=\"date\"\n              v-model=\"filters.startDate\"\n              class=\"form-control\"\n            />\n          </div>\n\n          <div class=\"col-md-6 mb-3\">\n            <label class=\"form-control-label\">End Date</label>\n            <input type=\"date\" v-model=\"filters.endDate\" class=\"form-control\" />\n          </div>\n\n          <div class=\"col-md-6 mb-3\">\n            <label class=\"form-control-label\"\n              >Retailers</label\n            >\n            <RetailersSelect\n              v-model=\"filters.retailers\"\n              :options=\"retailers\"\n              name=\"retailers\"\n            />\n          </div>\n\n          <div class=\"col-md-6 mb-3\">\n            <label class=\"form-control-label\"\n              >Products</label\n            >\n            <ProductsSelect\n              v-model=\"filters.products\"\n              :options=\"products\"\n              name=\"products\"\n            />\n          </div>\n        </div>\n\n        <argon-button\n          type=\"submit\"\n          :disabled=\"loading\"\n          color=\"success\"\n          class=\"d-flex align-items-center\"\n          @click=\"downloadCSV()\"\n        >\n          <i class=\"fas fa-download me-1\"></i>\n          {{ loading ? \"Exporting...\" : \"Export CSV\" }}\n        </argon-button>\n      </div>\n    </div>\n  </div>\n</template>\n"],"names":["_sfc_main","option","index","selected","opt","event","newValue","_hoisted_1","_hoisted_3","_hoisted_4","_createElementBlock","$props","_createElementVNode","_cache","$event","$data","_createTextVNode","_toDisplayString","_normalizeClass","_createVNode","_Transition","_withCtx","_openBlock","_hoisted_2","_Fragment","_renderList","i","$options","_withModifiers","_createCommentVNode","ArgonButton","RetailersSelect","ProductsSelect","downloadScrapedDataCSV","mapGetters","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_vModelText","_component_RetailersSelect","_ctx","_component_ProductsSelect","_component_argon_button"],"mappings":"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"}