{"version":3,"file":"Edit-3kAiRBbx.js","sources":["../../src/views/retailer/Edit.vue"],"sourcesContent":["<script>\nimport { mapGetters, mapActions } from \"vuex\";\n\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport ArgonInput from \"@/components/ArgonInput.vue\";\nimport CurrencySelect from \"@/components/CurrencySelect.vue\";\n\nimport { updateRetailer } from \"@/services/retailersService\";\n\nexport default {\n  name: \"Retailer Edit\",\n  components: {\n    ArgonInput,\n    ArgonButton,\n    CurrencySelect,\n  },\n  data() {\n    return {\n      updateRetailerForm: {\n        title: \"\",\n        logo: \"\",\n        url: \"\",\n        currency_id: null,\n      },\n      loading: false,\n      validationErrors: {},\n    };\n  },\n  computed: {\n    ...mapGetters(\"retailers\", [\"getRetailers\"]),\n    ...mapGetters({\n      currencies: \"currencies/getCurrencies\",\n    }),\n    retailerId() {\n      return this.$route.params.id;\n    },\n    selectedRetailer() {\n      return this.getRetailers.find(\n        (retailer) => retailer.id == this.retailerId\n      );\n    },\n  },\n  watch: {\n    selectedRetailer: {\n      immediate: true,\n      handler(newRetailer) {\n        if (newRetailer) {\n          this.updateRetailerForm = {\n            title: newRetailer.title,\n            logo: newRetailer.logo,\n            url: newRetailer.url,\n            currency_id: newRetailer.currency.id,\n          };\n        }\n      },\n    },\n  },\n  methods: {\n    ...mapActions(\"retailers\", [\"updateRetailer\"]),\n    async handleUpdate() {\n      this.validationErrors = {};\n      const res = await updateRetailer(\n        this.updateRetailerForm,\n        this.$refs.logoFile.files[0],\n        this.retailerId\n      );\n\n      if (res.success) {\n        this.updateRetailer(res.data);\n        this.$router.push({ name: \"Retailers\" });\n      } else {\n        if (res.errors) {\n          this.validationErrors = res.errors;\n        }\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"container-fluid py-4 flex-grow-1\">\n    <div class=\"row\">\n      <div class=\"col-lg-6 col-md-8 mx-auto w-75\">\n        <div class=\"card\">\n          <div class=\"card-header pb-0 text-center\">\n            <h6 class=\"text-primary\">Edit Retailer</h6>\n          </div>\n\n          <div class=\"card-body\">\n            <form @submit.prevent=\"handleUpdate\">\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Retailer Title</label>\n                <argon-input\n                  v-model=\"updateRetailerForm.title\"\n                  type=\"text\"\n                  placeholder=\"Enter retailer name\"\n                  required\n                />\n                <div v-if=\"validationErrors.title\" class=\"text-danger\">\n                  {{ validationErrors.title[0] }}\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Logo</label>\n                <div>\n                  <img\n                    v-if=\"updateRetailerForm.logo\"\n                    :src=\"updateRetailerForm.logo\"\n                    alt=\"Current logo\"\n                    class=\"img-fluid mb-4 w-50\"\n                  />\n                  <input\n                    ref=\"logoFile\"\n                    type=\"file\"\n                    class=\"form-control\"\n                    accept=\"image/*\"\n                    placeholder=\"Upload a new logo\"\n                  />\n                  <div v-if=\"validationErrors.logo\" class=\"text-danger\">\n                    {{ validationErrors.logo[0] }}\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label class=\"form-label\">URL</label>\n                <argon-input\n                  v-model=\"updateRetailerForm.url\"\n                  type=\"url\"\n                  placeholder=\"Enter URL\"\n                  required\n                />\n                <div v-if=\"validationErrors.url\" class=\"text-danger\">\n                  {{ validationErrors.url[0] }}\n                </div>\n              </div>\n\n              <div class=\"mb-3 w-25\">\n                <label class=\"form-label\">Currency</label>\n                <currency-select\n                  :options=\"currencies\"\n                  v-model=\"updateRetailerForm.currency_id\"\n                  name=\"currency\"\n                />\n                <div v-if=\"validationErrors.currency_id\" class=\"text-danger\">\n                  {{ validationErrors.currency_id[0] }}\n                </div>\n              </div>\n\n              <div class=\"text-center\">\n                <argon-button type=\"submit\" color=\"primary\" :disabled=\"loading\">\n                  {{ loading ? \"Updating...\" : \"Update Retailer\" }}\n                </argon-button>\n                <argon-button\n                  color=\"secondary\"\n                  class=\"ms-2\"\n                  @click=\"$router.push('/retailers')\"\n                >\n                  Cancel\n                </argon-button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped></style>\n"],"names":["_sfc_main","ArgonInput","ArgonButton","CurrencySelect","mapGetters","retailer","newRetailer","mapActions","res","updateRetailer","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_9","_hoisted_12","_hoisted_14","_hoisted_16","_openBlock","_createElementBlock","_createElementVNode","_cache","_withModifiers","$options","args","_createVNode","_component_argon_input","$data","$event","_hoisted_7","_toDisplayString","_createCommentVNode","_hoisted_10","_hoisted_11","_hoisted_13","_component_currency_select","_ctx","_hoisted_15","_component_argon_button","_withCtx","_createTextVNode"],"mappings":"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"}