import{_ as v,m as P,c as V,a as k,b as w,d as c,e,f as p,F as E,r as M,g as f,o as l,t as m,h as d,i,j as C,w as u,k as h,v as y}from"./index-Cm14stn1.js";import{d as S,a as A,f as R}from"./productsService-2GV88327.js";import{P as T}from"./Pagination-DdaM27Q0.js";import{R as _}from"./RetailersSelect-CxFTJVoB.js";const B={name:"ProductList",components:{ArgonButton:w},props:{products:Array},methods:{...k("products",["removeProduct"]),async handleDelete(s){(await S(s)).success&&this.removeProduct(s)},cutString:V},computed:{...P("auth",["isAdmin"])}},F={class:"card"},N={class:"card-body px-0 pt-0 pb-2"},j={class:"table-responsive ps-3 pe-3"},z={class:"table align-items-center mb-0 fs-7"},I={key:0,class:"ms-4 mt-2"},U=["src","alt"],L={class:"align-middle text-sm"},G={class:"font-weight-bold mb-0"},Y={class:"align-middle text-center"},q={class:"align-middle"},H={class:"text-muted"},J={class:"align-middle"};function K(s,t,b,$,a,g){const n=f("argon-button");return l(),c("div",F,[t[4]||(t[4]=e("div",{class:"card-header pb-3 d-flex align-items-center justify-content-between"},null,-1)),e("div",N,[e("div",j,[e("table",z,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Preview image "),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Title "),e("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," MPN # "),e("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Pack "),e("th",{class:"text-uppercase text-xxs text-secondary font-weight-bolder opacity-7"}," Actions ")])],-1)),e("tbody",null,[b.products.length?p("",!0):(l(),c("h6",I," There is no available products ")),(l(!0),c(E,null,M(b.products,o=>(l(),c("tr",{key:o.id},[e("td",null,[o.images.length?(l(),c("img",{key:0,src:o.images[0].file_url,alt:o.file_name,class:"avatar avatar-m me-3 product__img"},null,8,U)):p("",!0)]),e("td",L,[e("p",G,m(o.title),1)]),e("td",Y,m(o.manufacturer_part_number),1),e("td",q,[d(m(o.pack_size.name)+" ",1),e("small",H,"("+m(o.pack_size.weight)+", "+m(o.pack_size.amount)+" units)",1)]),e("td",J,[i(n,{color:"primary",onClick:x=>s.$router.push({path:`products/${o.id}/edit`})},{default:u(()=>t[0]||(t[0]=[d("Edit")])),_:2},1032,["onClick"]),i(n,{color:"dark",onClick:x=>s.$router.push({path:`products/${o.id}/retailers`}),class:"ms-2"},{default:u(()=>t[1]||(t[1]=[d("Retailers")])),_:2},1032,["onClick"]),s.isAdmin?(l(),C(n,{key:0,color:"warning",onClick:x=>g.handleDelete(o.id),class:"ms-2"},{default:u(()=>t[2]||(t[2]=[d("Delete")])),_:2},1032,["onClick"])):p("",!0)])]))),128))])])])])])}const O=v(B,[["render",K]]),Q={name:"Product Index",mounted(){this.handleProductsFetch()},data(){return{page:1,dataPerPage:30,showExportModal:!1,filter:{startDate:"",endDate:"",retailers:[]},RetailersSelect:_}},components:{ArgonButton:w,ProductsTable:O,Pagination:T,RetailersSelect:_},computed:{...P({products:"products/getProducts",pagination:"products/getMetadata",retailers:"retailers/getRetailers"})},methods:{...k({setProducts:"products/setProducts",setMetaData:"products/setMetaData"}),async handleProductsFetch(){const s=await R(this.dataPerPage,this.page);s.success&&(this.setProducts(s.data),this.setMetaData(s.meta))},setPage(s){this.page=s},async downloadCSV(){this.showExportModal=!1,await A(this.filter.startDate,this.filter.endDate,this.filter.retailers)}},watch:{page(){this.handleProductsFetch()}}},W={class:"pt-6 pb-4 flex-grow-1"},X={class:"card"},Z={class:"card-body px-0 pt-0 pb-2"},tt={class:"d-flex ps-4"},et={key:0,class:"ps-4"},st={class:"table-responsive p-0"},ot={key:0,class:"modal-overlay"},at={class:"modal-content"},lt={class:"modal-buttons mt-3"};function nt(s,t,b,$,a,g){const n=f("argon-button"),o=f("ProductsTable"),x=f("Pagination"),D=f("RetailersSelect");return l(),c("div",W,[e("div",X,[t[10]||(t[10]=e("div",{class:"card-header pb-3 d-flex align-items-center justify-content-between"},[e("h6",{class:"pe-4"},"Products table")],-1)),e("div",Z,[e("div",tt,[i(n,{type:"submit",color:"info",onClick:t[0]||(t[0]=r=>s.$router.push("/products/import"))},{default:u(()=>t[7]||(t[7]=[d(" Import ")])),_:1}),i(n,{type:"submit",color:"primary",class:"ms-3",onClick:t[1]||(t[1]=r=>s.$router.push("/products/create"))},{default:u(()=>t[8]||(t[8]=[d(" Create ")])),_:1}),i(n,{type:"button",color:"success",class:"ms-3 d-flex align-items-center",onClick:t[2]||(t[2]=r=>a.showExportModal=!0)},{default:u(()=>t[9]||(t[9]=[e("i",{class:"fas fa-download me-1"},null,-1),d(" Export ")])),_:1})]),s.products.length?p("",!0):(l(),c("h6",et," You do not have any products ")),e("div",st,[i(o,{products:s.products},null,8,["products"])]),s.pagination.last_page>1?(l(),C(x,{key:1,pagination:s.pagination,onSetPage:g.setPage},null,8,["pagination","onSetPage"])):p("",!0)])]),a.showExportModal?(l(),c("div",ot,[e("div",at,[t[13]||(t[13]=e("h5",null,"Export Products",-1)),t[14]||(t[14]=e("label",{class:"form-label"},"Start Date",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=r=>a.filter.startDate=r),class:"form-control"},null,512),[[y,a.filter.startDate]]),t[15]||(t[15]=e("label",{class:"form-label mt-2"},"End Date",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=r=>a.filter.endDate=r),class:"form-control"},null,512),[[y,a.filter.endDate]]),t[16]||(t[16]=e("label",{class:"form-label mt-2"},"Retailers",-1)),i(D,{modelValue:a.filter.retailers,"onUpdate:modelValue":t[5]||(t[5]=r=>a.filter.retailers=r),options:s.retailers,name:"retailers"},null,8,["modelValue","options"]),e("div",lt,[i(n,{color:"secondary",onClick:t[6]||(t[6]=r=>a.showExportModal=!1)},{default:u(()=>t[11]||(t[11]=[d("Cancel")])),_:1}),i(n,{color:"success",onClick:g.downloadCSV,class:"ms-2"},{default:u(()=>t[12]||(t[12]=[d("Export")])),_:1},8,["onClick"])])])])):p("",!0)])}const ut=v(Q,[["render",nt]]);export{ut as default};
//# sourceMappingURL=Index-Dbfxtl0d.js.map
