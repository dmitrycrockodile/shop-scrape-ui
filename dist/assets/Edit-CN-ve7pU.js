import{_ as y,a as E,m as k,b as F,l as x,d as i,e as r,n as v,f as d,i as n,g as f,t as u,k as z,v as C,F as w,r as P,w as p,h as g,o as a}from"./index-Cm14stn1.js";import{P as U}from"./PackSizeSelect-dNUK-uB_.js";import{b as V}from"./productsService-2GV88327.js";const N={name:"Product Edit",components:{ArgonInput:x,ArgonButton:F,PackSizeSelect:U},data(){return{updateProductForm:{title:"",description:"",manufacturer_part_number:"",pack_size_id:null,images:[]},maxImages:5,newImages:[],loading:!1,validationErrors:{}}},computed:{...k("products",["getProducts"]),...k({packSizes:"packSizes/getPackSizes"}),productId(){return this.$route.params.id},selectedProduct(){return this.getProducts.find(s=>s.id==this.productId)},totalImagesCount(){return this.updateProductForm.images.length+this.newImages.length}},watch:{selectedProduct:{immediate:!0,handler(s){s&&(this.updateProductForm={title:s.title,description:s.description,manufacturer_part_number:s.manufacturer_part_number,pack_size_id:s.pack_size.id,images:s.images||[]},this.newImages=[])}}},methods:{...E("products",["updateProduct"]),async handleUpdate(){this.validationErrors={};const s=await V(this.updateProductForm,this.newImages,this.productId);s.success?(this.updateProduct(s.data),this.$router.push({name:"Products"})):s.errors&&(this.validationErrors=s.errors)},handleFileChange(s,e){const _=s.target.files[0];_&&(this.newImages[e]=_)},addNewInputField(){this.totalImagesCount<this.maxImages&&this.newImages.push(null)},removeNewInputField(){this.newImages.length>0&&this.newImages.pop()},removeExistingImage(s){this.updateProductForm.images.splice(s,1)},getPreviewUrl(s){return s&&window.URL?window.URL.createObjectURL(s):""}}},S={class:"container-fluid py-4 flex-grow-1"},M={class:"row"},R={class:"col-lg-8 col-md-8 mx-auto"},A={class:"card"},B={class:"card-body"},L={class:"mb-3"},D={key:0,class:"text-danger"},T={class:"mb-3"},q={key:0,class:"text-danger"},j={class:"mb-3"},G={key:0,class:"text-danger"},O={class:"mb-3"},H={key:0,class:"text-danger"},J={key:0,class:"mb-3"},K={class:"mb-3 d-flex flex-column"},Q=["src","alt"],W={class:"mb-3"},X={key:0,class:"text-danger"},Y=["onChange"],Z={key:0},$=["src"],ee={key:1,class:"text-danger"},te={class:"text-center"};function re(s,e,_,se,t,l){const b=f("argon-input"),I=f("pack-size-select"),c=f("argon-button");return a(),i("div",S,[r("div",M,[r("div",R,[r("div",A,[e[16]||(e[16]=r("div",{class:"card-header pb-0 text-center"},[r("h6",{class:"text-primary"},"Edit Product")],-1)),r("div",B,[r("form",{onSubmit:e[5]||(e[5]=v((...o)=>l.handleUpdate&&l.handleUpdate(...o),["prevent"]))},[r("div",L,[e[6]||(e[6]=r("label",{class:"form-label"},"Product Title",-1)),n(b,{modelValue:t.updateProductForm.title,"onUpdate:modelValue":e[0]||(e[0]=o=>t.updateProductForm.title=o),modelModifiers:{trim:!0,lazy:!0},type:"text",placeholder:"Enter product name",required:""},null,8,["modelValue"]),t.validationErrors.title?(a(),i("div",D,u(t.validationErrors.title[0]),1)):d("",!0)]),r("div",T,[e[7]||(e[7]=r("label",{class:"form-label"},"Description",-1)),z(r("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.updateProductForm.description=o),class:"form-control",placeholder:"Enter product description"},null,512),[[C,t.updateProductForm.description,void 0,{trim:!0,lazy:!0}]]),t.validationErrors.description?(a(),i("div",q,u(t.validationErrors.description[0]),1)):d("",!0)]),r("div",j,[e[8]||(e[8]=r("label",{class:"form-label"},"Manufacturer Part Number",-1)),n(b,{modelValue:t.updateProductForm.manufacturer_part_number,"onUpdate:modelValue":e[2]||(e[2]=o=>t.updateProductForm.manufacturer_part_number=o),modelModifiers:{trim:!0,lazy:!0},type:"text",placeholder:"Enter manufacturer part number",required:""},null,8,["modelValue"]),t.validationErrors.manufacturer_part_number?(a(),i("div",G,u(t.validationErrors.manufacturer_part_number[0]),1)):d("",!0)]),r("div",O,[e[9]||(e[9]=r("label",{class:"form-label"},"Pack Size",-1)),n(I,{options:s.packSizes,modelValue:t.updateProductForm.pack_size_id,"onUpdate:modelValue":e[3]||(e[3]=o=>t.updateProductForm.pack_size_id=o),name:"pack_size"},null,8,["options","modelValue"]),t.validationErrors.pack_size_id?(a(),i("div",H,u(t.validationErrors.pack_size_id[0]),1)):d("",!0)]),t.updateProductForm.images.length?(a(),i("div",J,[e[11]||(e[11]=r("label",{class:"form-label"},"Images",-1)),(a(!0),i(w,null,P(t.updateProductForm.images,(o,m)=>(a(),i("div",{key:o.id},[r("div",K,[r("img",{src:o.file_url,alt:o.file_name,class:"img-thumbnail m-1 w-50",width:"100"},null,8,Q),n(c,{color:"danger",class:"ms-2 w-15 mt-2",onClick:h=>l.removeExistingImage(m)},{default:p(()=>e[10]||(e[10]=[g("Remove")])),_:2},1032,["onClick"])])]))),128))])):d("",!0),r("div",W,[e[12]||(e[12]=r("label",{class:"form-label"},"New Images",-1)),t.validationErrors.images?(a(),i("div",X,u(t.validationErrors.images[0]),1)):d("",!0),(a(!0),i(w,null,P(t.newImages,(o,m)=>(a(),i("div",{key:"new-"+m,class:"mb-3"},[r("input",{type:"file",class:"form-control",accept:"image/*",onChange:h=>l.handleFileChange(h,m)},null,40,Y),o?(a(),i("div",Z,[r("img",{src:l.getPreviewUrl(o),alt:"New image preview",class:"img-thumbnail m-1 w-50",width:"100"},null,8,$)])):d("",!0),t.validationErrors[`images.${m}`]?(a(),i("div",ee,u(t.validationErrors[`images.${m}`][0]),1)):d("",!0)]))),128))]),n(c,{color:"primary",class:"mt-2 mb-4",onClick:v(l.addNewInputField,["prevent"]),disabled:l.totalImagesCount>=t.maxImages},{default:p(()=>e[13]||(e[13]=[g(" Add ")])),_:1},8,["onClick","disabled"]),n(c,{color:"primary",class:"mt-2 mb-4 ms-2",onClick:v(l.removeNewInputField,["prevent"]),disabled:t.newImages.length<=0},{default:p(()=>e[14]||(e[14]=[g(" Remove ")])),_:1},8,["onClick","disabled"]),r("div",te,[n(c,{type:"submit",color:"primary",disabled:t.loading},{default:p(()=>[g(u(t.loading?"Updating...":"Update Product"),1)]),_:1},8,["disabled"]),n(c,{color:"secondary",class:"ms-2",onClick:e[4]||(e[4]=o=>s.$router.push("/products"))},{default:p(()=>e[15]||(e[15]=[g(" Cancel ")])),_:1})])],32)])])])])])}const le=y(N,[["render",re]]);export{le as default};
//# sourceMappingURL=Edit-CN-ve7pU.js.map
