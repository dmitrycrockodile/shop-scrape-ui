{"version":3,"file":"Index-Dbfxtl0d.js","sources":["../../src/views/components/ProductsTable.vue","../../src/views/product/Index.vue"],"sourcesContent":["<script>\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport { deleteProduct } from \"@/services/productsService\";\nimport { mapActions, mapGetters } from \"vuex\";\nimport { cutString } from \"@/utils/helpers.js\";\n\nexport default {\n    name: \"ProductList\",\n    components: {\n        ArgonButton,\n    },\n    props: {\n        products: Array,\n    },\n  methods: {\n    ...mapActions(\"products\", [\"removeProduct\"]),\n    async handleDelete(id) {\n      const res = await deleteProduct(id);\n\n      if (res.success) {\n        this.removeProduct(id);\n      }\n    },\n    cutString\n  },\n  computed: {\n    ...mapGetters(\"auth\", [\"isAdmin\"]),\n  },\n};\n</script>\n\n<template>\n  <div class=\"card\">\n    <div\n      class=\"card-header pb-3 d-flex align-items-center justify-content-between\"\n    >\n    </div>\n    <div class=\"card-body px-0 pt-0 pb-2\">\n      <div class=\"table-responsive ps-3 pe-3\">\n        <table class=\"table align-items-center mb-0 fs-7\">\n            <thead>\n              <tr>\n                <th\n                  class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2\"\n                >\n                  Preview image\n                </th>\n                <th\n                  class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\n                >\n                  Title\n                </th>\n                <th\n                  class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\n                >\n                    MPN #\n                </th>\n                <th\n                  class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\n                >\n                    Pack\n                </th>\n                <th\n                  class=\"text-uppercase text-xxs text-secondary font-weight-bolder opacity-7\"\n                >\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <h6 class=\"ms-4 mt-2\" v-if=\"!products.length\">\n                There is no available products\n              </h6>\n              <tr v-for=\"product in products\" :key=\"product.id\">\n                <td>\n                  <img\n                    v-if=\"product.images.length\"\n                    :src=\"product.images[0].file_url\"\n                    :alt=\"product.file_name\"\n                    class=\"avatar avatar-m me-3 product__img\"\n                  />\n                </td>\n                <td class=\"align-middle text-sm\">\n                  <p class=\"font-weight-bold mb-0\">{{ product.title }}</p>\n                </td>\n                <td class=\"align-middle text-center\">\n                    {{ product.manufacturer_part_number }}\n                </td>\n                <td class=\"align-middle\">\n                    {{ product.pack_size.name }}\n                    <small class=\"text-muted\"\n                    >({{ product.pack_size.weight }},\n                    {{ product.pack_size.amount }} units)</small\n                    >\n                </td>\n                <td class=\"align-middle\">\n                    <argon-button\n                    color=\"primary\"\n                    @click=\"$router.push({ path: `products/${product.id}/edit` })\"\n                    >Edit</argon-button\n                  >\n                  <argon-button\n                    color=\"dark\"\n                    @click=\"\n                      $router.push({ path: `products/${product.id}/retailers` })\n                    \"\n                    class=\"ms-2\"\n                    >Retailers</argon-button\n                  >\n                  <argon-button\n                    v-if=\"isAdmin\"\n                    color=\"warning\"\n                    @click=\"handleDelete(product.id)\"\n                    class=\"ms-2\"\n                    >Delete</argon-button\n                  >\n                </td>\n              </tr>\n            </tbody>\n          </table>\n      </div>\n    </div>\n  </div>\n</template>\n<style>\n.product__img {\n    width: 60px;\n    height: 60px;\n}\n</style>","<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport { fetchProducts, downloadProductsCSV } from \"@/services/productsService\";\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport Pagination from \"@/components/Pagination.vue\";\nimport ProductsTable from \"../components/ProductsTable.vue\";\nimport RetailersSelect from \"@/components/RetailersSelect.vue\";\n\nexport default {\n  name: \"Product Index\",\n  mounted() {\n    this.handleProductsFetch();\n  },\n  data() {\n    return {\n      page: 1,\n      dataPerPage: 30,\n      showExportModal: false,\n      filter: {\n        startDate: \"\",\n        endDate: \"\",\n        retailers: [],\n      },\n      RetailersSelect\n      // isPageLoading: true,\n      // isProductsLoading: true,\n    };\n  },\n  components: {\n    ArgonButton,\n    ProductsTable,\n    Pagination,\n    RetailersSelect\n  },\n  computed: {\n    ...mapGetters({\n      products: \"products/getProducts\",\n      pagination: \"products/getMetadata\",\n      retailers: \"retailers/getRetailers\",\n    }),\n  },\n  methods: {\n    ...mapActions({\n      setProducts: \"products/setProducts\",\n      setMetaData: \"products/setMetaData\",\n    }),\n    async handleProductsFetch() {\n      const res = await fetchProducts(this.dataPerPage, this.page);\n\n      if (res.success) {\n        this.setProducts(res.data);\n        this.setMetaData(res.meta);\n      }\n    },\n    setPage(newPage) {\n      this.page = newPage;\n    },\n    async downloadCSV() {\n      this.showExportModal = false;\n      await downloadProductsCSV(this.filter.startDate, this.filter.endDate, this.filter.retailers);\n    },\n  },\n  watch: {\n    page() {\n      this.handleProductsFetch();\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"pt-6 pb-4 flex-grow-1\">\n    <div class=\"card\">\n      <div\n        class=\"card-header pb-3 d-flex align-items-center justify-content-between\"\n      >\n        <h6 class=\"pe-4\">Products table</h6>\n      </div>\n      <div class=\"card-body px-0 pt-0 pb-2\">\n        <div class=\"d-flex ps-4\">\n            <argon-button\n              type=\"submit\"\n              color=\"info\"\n              @click=\"$router.push('/products/import')\"\n            >\n              Import\n            </argon-button>\n            <argon-button\n              type=\"submit\"\n              color=\"primary\"\n              class=\"ms-3\"\n              @click=\"$router.push('/products/create')\"\n            >\n              Create\n            </argon-button>\n            <argon-button type=\"button\" color=\"success\" class=\"ms-3 d-flex align-items-center\" @click=\"showExportModal = true\">\n                <i class=\"fas fa-download me-1\"></i>\n                Export\n            </argon-button>\n        </div>\n\n        <h6 v-if=\"!products.length\" class=\"ps-4\">\n          You do not have any products\n        </h6>\n        <div class=\"table-responsive p-0\">\n          <ProductsTable :products=\"products\" />\n        </div>\n        <Pagination\n          v-if=\"pagination.last_page > 1\"\n          :pagination=\"pagination\"\n          @setPage=\"setPage\"\n        />\n      </div>\n    </div>\n\n    <div v-if=\"showExportModal\" class=\"modal-overlay\">\n        <div class=\"modal-content\">\n          <h5>Export Products</h5>\n          <label class=\"form-label\">Start Date</label>\n          <input type=\"date\" v-model=\"filter.startDate\" class=\"form-control\" />\n  \n          <label class=\"form-label mt-2\">End Date</label>\n          <input type=\"date\" v-model=\"filter.endDate\" class=\"form-control\" />\n  \n          <label class=\"form-label mt-2\">Retailers</label>\n         <RetailersSelect \n         v-model=\"filter.retailers\"\n        :options=\"retailers\"\n        name=\"retailers\"\n         />\n  \n          <div class=\"modal-buttons mt-3\">\n            <argon-button color=\"secondary\" @click=\"showExportModal = false\">Cancel</argon-button>\n            <argon-button color=\"success\" @click=\"downloadCSV\" class=\"ms-2\">Export</argon-button>\n          </div>\n        </div>\n      </div>\n  </div>\n</template>\n\n<style>\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n  }\n  \n  .modal-content {\n    background: white;\n    padding: 20px;\n    border-radius: 10px;\n    width: 400px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n  }\n  \n  .modal-buttons {\n    display: flex;\n    justify-content: flex-end;\n  }\n</style>"],"names":["_sfc_main","ArgonButton","mapActions","id","deleteProduct","cutString","mapGetters","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_openBlock","_createElementBlock","_createElementVNode","$props","_createCommentVNode","_hoisted_5","_Fragment","_renderList","product","_toDisplayString","_createTextVNode","_createVNode","_component_argon_button","_ctx","_withCtx","_cache","$event","_createBlock","$options","RetailersSelect","ProductsTable","Pagination","res","fetchProducts","newPage","downloadProductsCSV","$data","_component_ProductsTable","_component_Pagination","_vModelText","_component_RetailersSelect"],"mappings":"2TAMA,MAAKA,EAAU,CACX,KAAM,cACN,WAAY,aACRC,CACH,EACD,MAAO,CACH,SAAU,KACb,EACH,QAAS,CACP,GAAGC,EAAW,WAAY,CAAC,eAAe,CAAC,EAC3C,MAAM,aAAaC,EAAI,EACT,MAAMC,EAAcD,CAAE,GAE1B,SACN,KAAK,cAAcA,CAAE,CAExB,EACD,UAAAE,CACD,EACD,SAAU,CACR,GAAGC,EAAW,OAAQ,CAAC,SAAS,CAAC,CAClC,CACH,EAIOC,EAAA,CAAA,MAAM,MAAM,EAKVC,EAAA,CAAA,MAAM,0BAA0B,EAC9BC,EAAA,CAAA,MAAM,4BAA4B,EAC9BC,EAAA,CAAA,MAAM,oCAAoC,KAvCzD,IAAA,EAsEkB,MAAM,aAtExBC,EAAA,CAAA,MAAA,KAAA,EAkFoBC,EAAA,CAAA,MAAM,sBAAsB,EAC3BC,EAAA,CAAA,MAAM,uBAAuB,EAE9BC,EAAA,CAAA,MAAM,0BAA0B,EAGhCC,EAAA,CAAA,MAAM,cAAc,EAEbC,EAAA,CAAA,MAAM,YAAY,EAKzBC,EAAA,CAAA,MAAM,cAAc,oDA/DtC,OAAAC,EAAA,EAAAC,EA0FM,MA1FNZ,EA0FM,aAzFJa,EAGM,MAAA,CAFJ,MAAM,oEAAoE,EAAA,KAAA,EAAA,GAG5EA,EAoFM,MApFNZ,EAoFM,CAnFJY,EAkFM,MAlFNX,EAkFM,CAjFJW,EAgFU,QAhFVV,EAgFU,aA/ENU,EA4BQ,QAAA,KAAA,CA3BNA,EA0BK,KAAA,KAAA,CAzBHA,EAIK,KAHH,CAAA,MAAM,0EAA0E,EACjF,iBAED,EACAA,EAIK,KAHH,CAAA,MAAM,qEAAqE,EAC5E,SAED,EACAA,EAIK,KAHH,CAAA,MAAM,iFAAiF,EACxF,SAED,EACAA,EAIK,KAHH,CAAA,MAAM,iFAAiF,EACxF,QAED,EACAA,EAIK,KAHH,CAAA,MAAM,uEACP,WAED,UAGJA,EAiDQ,QAAA,KAAA,CAhDuBC,EAAA,SAAS,OAtEpDC,EAAA,GAAA,EAAA,OAsEcH,EAEK,KAFLI,EAA8C,kCAE9C,IACAL,EAAA,EAAA,EAAAC,EA4CKK,EArHnB,KAAAC,EAyEoCJ,EAAQ,SAAnBK,QAAXP,EA4CK,KAAA,CA5C4B,IAAKO,EAAQ,KAC5CN,EAOK,KAAA,KAAA,CALKM,EAAQ,OAAO,YADvBP,EAKE,MAAA,CAhFpB,IAAA,EA6EqB,IAAKO,EAAQ,UAAU,SACvB,IAAKA,EAAQ,UACd,MAAM,mCA/E1B,EAAA,KAAA,EAAAf,CAAA,GAAAW,EAAA,GAAA,EAAA,IAkFgBF,EAEK,KAFLR,EAEK,CADHQ,EAAwD,IAAxDP,EAAoCc,EAAAD,EAAQ,KAAK,EAAA,CAAA,IAEnDN,EAEK,KAFLN,EACOa,EAAAD,EAAQ,wBAAwB,EAAA,CAAA,EAEvCN,EAMK,KANLL,EAMK,CA9FrBa,EAAAD,EAyFuBD,EAAQ,UAAU,IAAI,EAAG,IAC5B,CAAA,EAAAN,EAGC,QAHDJ,EACC,IAAIW,EAAAD,EAAQ,UAAU,MAAM,EAAG,OAC7BA,EAAQ,UAAU,MAAM,EAAG,UAAO,CAAA,IAGzCN,EAqBK,KArBLH,EAqBK,CApBDY,EAIDC,EAAA,CAHC,MAAM,UACL,WAAOC,EAAO,QAAC,KAAyB,CAAA,KAAA,YAAAL,EAAQ,EAAE,OAAA,CAAA,IAlGvE,QAAAM,EAmGqB,IAAIC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAnGzBL,EAmGqB,MAAI,KAnGzB,EAAA,qBAqGkBC,EAOCC,EAAA,CANC,MAAM,OACL,QAAKI,GAAyBH,EAAA,QAAQ,KAAyB,CAAA,KAAA,YAAAL,EAAQ,EAAE,YAAA,CAAA,EAG1E,MAAM,SA1G1B,QAAAM,EA2GqB,IAASC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA3G9BL,EA2GqB,WAAS,KA3G9B,EAAA,qBA8G0BG,EAAO,aADfI,EAMCL,EAAA,CAnHnB,IAAA,EA+GoB,MAAM,UACL,QAAOI,GAAAE,EAAA,aAAaV,EAAQ,EAAE,EAC/B,MAAM,SAjH1B,QAAAM,EAkHqB,IAAMC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAlH3BL,EAkHqB,QAAM,KAlH3B,EAAA,sBAAAN,EAAA,GAAA,EAAA,oDCQKtB,EAAU,CACb,KAAM,gBACN,SAAU,CACR,KAAK,oBAAqB,CAC3B,EACD,MAAO,CACL,MAAO,CACL,KAAM,EACN,YAAa,GACb,gBAAiB,GACjB,OAAQ,CACN,UAAW,GACX,QAAS,GACT,UAAW,CAAE,CACd,EACD,gBAAAqC,CAGD,CACF,EACD,WAAY,aACVpC,EACA,cAAAqC,EACA,WAAAC,EACA,gBAAAF,CACD,EACD,SAAU,CACR,GAAG/B,EAAW,CACZ,SAAU,uBACV,WAAY,uBACZ,UAAW,wBACb,CAAC,CACF,EACD,QAAS,CACP,GAAGJ,EAAW,CACZ,YAAa,uBACb,YAAa,sBACf,CAAC,EACD,MAAM,qBAAsB,CAC1B,MAAMsC,EAAM,MAAMC,EAAc,KAAK,YAAa,KAAK,IAAI,EAEvDD,EAAI,UACN,KAAK,YAAYA,EAAI,IAAI,EACzB,KAAK,YAAYA,EAAI,IAAI,EAE5B,EACD,QAAQE,EAAS,CACf,KAAK,KAAOA,CACb,EACD,MAAM,aAAc,CAClB,KAAK,gBAAkB,GACvB,MAAMC,EAAoB,KAAK,OAAO,UAAW,KAAK,OAAO,QAAS,KAAK,OAAO,SAAS,CAC5F,CACF,EACD,MAAO,CACL,MAAO,CACL,KAAK,oBAAqB,CAC3B,CACF,CACH,EAIOpC,EAAA,CAAA,MAAM,uBAAuB,EAC3BC,EAAA,CAAA,MAAM,MAAM,EAMVC,EAAA,CAAA,MAAM,0BAA0B,EAC9BC,GAAA,CAAA,MAAM,aAAa,MA/EhC,IAAA,EAqGoC,MAAM,QAG7BC,GAAA,CAAA,MAAM,sBAAsB,MAxGzC,IAAA,EAmHgC,MAAM,iBACzBE,GAAA,CAAA,MAAM,eAAe,EAenBC,GAAA,CAAA,MAAM,oBAAoB,mHA5DvC,OAAAI,EAAA,EAAAC,EAkEM,MAlENZ,EAkEM,CAjEJa,EAyCM,MAzCNZ,EAyCM,eAxCJY,EAIM,MAAA,CAHJ,MAAM,sEAAoE,CAE1EA,EAAoC,KAAhC,CAAA,MAAM,QAAO,gBAAc,QAEjCA,EAkCM,MAlCNX,EAkCM,CAjCJW,EAoBM,MApBNV,GAoBM,CAnBFmB,EAMeC,EAAA,CALb,KAAK,SACL,MAAM,OACL,QAAKG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEH,EAAO,QAAC,KAAI,kBAAA,KAnFlC,QAAAC,EAoFa,IAEDC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAtFZL,EAoFa,UAED,KAtFZ,EAAA,IAuFYC,EAOeC,EAAA,CANb,KAAK,SACL,MAAM,UACN,MAAM,OACL,QAAKG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEH,EAAO,QAAC,KAAI,kBAAA,KA3FlC,QAAAC,EA4Fa,IAEDC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA9FZL,EA4Fa,UAED,KA9FZ,EAAA,IA+FYC,EAGeC,EAAA,CAHD,KAAK,SAAS,MAAM,UAAU,MAAM,iCAAkC,uBAAOc,EAAe,gBAAA,MA/FtH,QAAAZ,EAgGgB,IAAoCC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAApCb,EAAoC,IAAA,CAAjC,MAAM,sBAAsB,EAAA,KAAA,EAAA,EAhG/CQ,EAgGoD,UAExC,KAlGZ,EAAA,MAqGmBG,EAAA,SAAS,OArG5BT,EAAA,GAAA,EAAA,OAqGQH,EAEK,KAFLI,GAAyC,gCAEzC,GACAH,EAEM,MAFNT,GAEM,CADJkB,EAAsCgB,EAAA,CAAtB,SAAUd,EAAQ,QAAA,EAAA,KAAA,EAAA,CAAA,UAAA,CAAA,IAG5BA,EAAA,WAAW,UAAS,OAD5BI,EAIEW,EAAA,CA/GV,IAAA,EA6GW,WAAYf,EAAU,WACtB,UAASK,EAAO,6CA9G3Bd,EAAA,GAAA,EAAA,MAmHesB,EAAe,iBAA1B1B,IAAAC,EAqBQ,MArBRP,GAqBQ,CApBJQ,EAmBM,MAnBNP,GAmBM,CAlBJoB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAb,EAAwB,UAApB,kBAAe,EAAA,GACnBa,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAb,EAA4C,QAArC,CAAA,MAAM,YAAY,EAAC,aAAU,EAAA,KACpCA,EAAqE,QAAA,CAA9D,KAAK,OAvHtB,sBAuHsCa,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAU,EAAA,OAAO,UAASV,GAAE,MAAM,2BAAxB,CAAAa,EAAAH,EAAA,OAAO,SAAS,IAE5CX,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAb,EAA+C,QAAxC,CAAA,MAAM,iBAAiB,EAAC,WAAQ,EAAA,KACvCA,EAAmE,QAAA,CAA5D,KAAK,OA1HtB,sBA0HsCa,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAU,EAAA,OAAO,QAAOV,GAAE,MAAM,2BAAtB,CAAAa,EAAAH,EAAA,OAAO,OAAO,IAE1CX,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAb,EAAgD,QAAzC,CAAA,MAAM,iBAAiB,EAAC,YAAS,EAAA,GACzCS,EAIEmB,EAAA,CAjIX,WA8HkBJ,EAAA,OAAO,UA9HzB,sBA8HkBX,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAU,EAAA,OAAO,UAASV,GACzB,QAASH,EAAS,UACnB,KAAK,8CAGHX,EAGM,MAHNN,GAGM,CAFJe,EAAsFC,EAAA,CAAxE,MAAM,YAAa,uBAAOc,EAAe,gBAAA,MApInE,QAAAZ,EAoI6E,IAAMC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CApInFL,EAoI6E,QAAM,KApInF,EAAA,IAqIYC,EAAqFC,EAAA,CAAvE,MAAM,UAAW,QAAOM,EAAW,YAAE,MAAM,SArIrE,QAAAJ,EAqI4E,IAAMC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CArIlFL,EAqI4E,QAAM,KArIlF,EAAA,yBAAAN,EAAA,GAAA,EAAA"}